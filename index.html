<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–ú–∞—Ç—Ä–∏—Ü–∞ –≠–π–∑–µ–Ω—Ö–∞—É—ç—Ä–∞</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#0d1020;
  --panel:#1b1f2e;
  --text:#f5f6fa;
  --muted:#9aa0b5;
  --accent:#6f7dff;
}

*{box-sizing:border-box;margin:0;padding:0;font-family:Inter,sans-serif;}

body{
  min-height:100vh;
  background:
    linear-gradient(rgba(255,255,255,.04) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255,255,255,.04) 1px, transparent 1px),
    var(--bg);
  background-size:40px 40px;
  color:var(--text);
}

header{
  text-align:center;
  padding:18px;
  font-size:26px;
  font-weight:700;
  color:var(--accent);
}

/* ===== MATRIX ===== */
.board{
  padding:14px;
  display:grid;
  gap:12px;
}

.quadrant{
  position:relative;
  background:linear-gradient(180deg,#1e2334,#191d2b);
  border-radius:22px;
  padding:16px 18px 16px 22px;
  box-shadow:0 10px 24px rgba(0,0,0,.45);
  cursor:pointer;
}

.quadrant::before{
  content:'';
  position:absolute;
  left:0;top:0;bottom:0;
  width:5px;
  border-radius:22px 0 0 22px;
}

.q1::before{background:#ff6b6b;}
.q2::before{background:#4dabff;}
.q3::before{background:#ffd666;}
.q4::before{background:#6ee7b7;}

h2{font-size:14px;font-weight:600;margin-bottom:10px;}

.tasks{display:flex;flex-direction:column;gap:8px;}

.task{
  background:#0f1324;
  padding:10px 12px;
  border-radius:12px;
  font-size:13px;
}

.task small{
  display:block;
  color:var(--muted);
  font-size:11px;
  margin-top:4px;
}

/* ===== POMODORO ===== */
.pomodoro{
  margin:14px;
  padding:18px;
  background:linear-gradient(180deg,#1e2334,#191d2b);
  border-radius:22px;
}

.timer{
  text-align:center;
  font-size:44px;
  font-weight:700;
  margin:16px 0;
}

.pomo-grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:12px;
}

input{
  width:100%;
  padding:10px 12px;
  border-radius:12px;
  border:none;
  background:#0f1324;
  color:white;
}

label{font-size:12px;color:var(--muted);}

.mode-buttons,.buttons{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
  margin-top:10px;
}

.buttons{grid-template-columns:1fr 1fr 1fr;}

button{
  padding:12px;
  border-radius:14px;
  border:none;
  font-weight:600;
  cursor:pointer;
  color:white;
}

.primary{background:linear-gradient(135deg,#6f7dff,#7f8cff);}
.secondary{background:linear-gradient(135deg,#4a4f6a,#5c6280);}
button.active{outline:2px solid var(--accent);}

/* ===== MODAL ===== */
.modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.6);
  display:none;
  align-items:center;
  justify-content:center;
}

.modal.active{display:flex;}

.modal-box{
  background:var(--panel);
  border-radius:20px;
  padding:18px;
  width:90%;
  max-width:360px;
}

.modal-box input,
.modal-box textarea{
  width:100%;
  margin-bottom:10px;
  padding:10px 12px;
  border-radius:12px;
  border:none;
  background:#0f1324;
  color:white;
}

.modal-box textarea{resize:none;height:70px;}
</style>
</head>

<body>

<header>–ú–∞—Ç—Ä–∏—Ü–∞ –≠–π–∑–µ–Ω—Ö–∞—É—ç—Ä–∞</header>

<div class="board">
  <div class="quadrant q1" data-id="q1"><h2>–í–∞–∂–Ω–æ ¬∑ –°—Ä–æ—á–Ω–æ</h2><div class="tasks"></div></div>
  <div class="quadrant q2" data-id="q2"><h2>–í–∞–∂–Ω–æ ¬∑ –ù–µ —Å—Ä–æ—á–Ω–æ</h2><div class="tasks"></div></div>
  <div class="quadrant q3" data-id="q3"><h2>–ù–µ –≤–∞–∂–Ω–æ ¬∑ –°—Ä–æ—á–Ω–æ</h2><div class="tasks"></div></div>
  <div class="quadrant q4" data-id="q4"><h2>–ù–µ –≤–∞–∂–Ω–æ ¬∑ –ù–µ —Å—Ä–æ—á–Ω–æ</h2><div class="tasks"></div></div>
</div>

<div class="pomodoro">
  <div class="pomo-grid">
    <div>
      <label>–†–∞–±–æ—Ç–∞ (–º–∏–Ω)</label>
      <input id="workInput" type="number" value="25">
    </div>
    <div>
      <label>–û—Ç–¥—ã—Ö (–º–∏–Ω)</label>
      <input id="breakInput" type="number" value="5">
    </div>
  </div>

  <div id="timer" class="timer">25:00</div>

  <div class="mode-buttons">
    <button id="workBtn" class="secondary active">–†–∞–±–æ—Ç–∞</button>
    <button id="breakBtn" class="secondary">–û—Ç–¥—ã—Ö</button>
  </div>

  <div class="buttons">
    <button id="startBtn" class="primary">–°—Ç–∞—Ä—Ç</button>
    <button id="pauseBtn" class="secondary">–ü–∞—É–∑–∞</button>
    <button id="resetBtn" class="secondary">–°–±—Ä–æ—Å–∏—Ç—å</button>
  </div>
</div>

<!-- MODAL -->
<div class="modal" id="modal">
  <div class="modal-box">
    <input id="taskTitle" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏">
    <input id="taskDate" type="date">
    <textarea id="taskComment" placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π"></textarea>
    <div class="mode-buttons">
      <button class="primary" id="saveTask">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      <button class="secondary" id="cancelTask">–û—Ç–º–µ–Ω–∞</button>
    </div>
  </div>
</div>

<script>
/* ===== TASKS ===== */
let currentQuadrant=null;
const modal=document.getElementById('modal');
const data=JSON.parse(localStorage.getItem('tasks'))||{q1:[],q2:[],q3:[],q4:[]};

function render(){
  document.querySelectorAll('.quadrant').forEach(q=>{
    const list=q.querySelector('.tasks');
    list.innerHTML='';
    data[q.dataset.id].forEach(t=>{
      const d=document.createElement('div');
      d.className='task';
      d.innerHTML=`
        ${t.title}
        ${t.date?`<small>üìÖ ${t.date}</small>`:''}
        ${t.comment?`<small>${t.comment}</small>`:''}`;
      list.appendChild(d);
    });
  });
  localStorage.setItem('tasks',JSON.stringify(data));
}

document.querySelectorAll('.quadrant').forEach(q=>{
  q.onclick=()=>{
    currentQuadrant=q.dataset.id;
    modal.classList.add('active');
  };
});

saveTask.onclick=()=>{
  if(!taskTitle.value.trim())return;
  data[currentQuadrant].push({
    title:taskTitle.value,
    date:taskDate.value,
    comment:taskComment.value
  });
  taskTitle.value=taskDate.value=taskComment.value='';
  modal.classList.remove('active');
  render();
};

cancelTask.onclick=()=>modal.classList.remove('active');
render();

/* ===== REAL TIME POMODORO ===== */
let mode='work';
let duration=workInput.value*60*1000;
let endTime=null;
let raf=null;

function format(ms){
  ms=Math.max(0,ms);
  const s=Math.floor(ms/1000);
  return String(Math.floor(s/60)).padStart(2,'0')+':'+String(s%60).padStart(2,'0');
}

function tick(){
  const left=endTime-Date.now();
  timer.textContent=format(left);
  if(left<=0){cancelAnimationFrame(raf);raf=null;}
  else raf=requestAnimationFrame(tick);
}

function start(){
  if(raf)return;
  endTime=Date.now()+duration;
  tick();
}

function pause(){
  if(!raf)return;
  duration=endTime-Date.now();
  cancelAnimationFrame(raf);
  raf=null;
}

function reset(){
  pause();
  duration=(mode==='work'?workInput.value:breakInput.value)*60*1000;
  timer.textContent=format(duration);
}

function setMode(m){
  mode=m;
  reset();
  workBtn.classList.toggle('active',m==='work');
  breakBtn.classList.toggle('active',m==='break');
}

startBtn.onclick=start;
pauseBtn.onclick=pause;
resetBtn.onclick=reset;
workBtn.onclick=()=>setMode('work');
breakBtn.onclick=()=>setMode('break');

reset();
</script>

</body>
</html>
