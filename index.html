<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Матрица Эйзенхауэра</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#0d1020;
  --panel:#1b1f2e;
  --text:#f5f6fa;
  --muted:#9aa0b5;
  --accent:#6f7dff;
}

*{box-sizing:border-box;margin:0;padding:0;font-family:Inter,sans-serif;}

body{
  min-height:100vh;
  background:
    linear-gradient(rgba(255,255,255,.04) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255,255,255,.04) 1px, transparent 1px),
    var(--bg);
  background-size:40px 40px;
  color:var(--text);
}

header{
  text-align:center;
  padding:18px;
  font-size:26px;
  font-weight:700;
  color:var(--accent);
}

/* === MATRIX FIX === */
.board{
  padding:14px;
  display:grid;
  grid-template-columns:1fr 1fr;
  grid-template-rows:auto auto;
  gap:12px;
}

@media(max-width:720px){
  .board{grid-template-columns:1fr;}
}

.quadrant{
  position:relative;
  background:linear-gradient(180deg,#1e2334,#191d2b);
  border-radius:22px;
  padding:16px 18px 18px 22px;
  box-shadow:0 10px 24px rgba(0,0,0,.45);
}
.quadrant::before{
  content:'';
  position:absolute;left:0;top:0;bottom:0;width:5px;
  border-radius:22px 0 0 22px;
}
.q1::before{background:#ff6b6b;}
.q2::before{background:#4dabff;}
.q3::before{background:#ffd666;}
.q4::before{background:#6ee7b7;}

h2{font-size:14px;font-weight:600;margin-bottom:10px;}
.tasks{
  display:flex;
  flex-direction:column;
  gap:8px;
  min-height:40px;
}

.task{
  padding:10px 12px;
  border-radius:12px;
  font-size:13px;
  cursor:pointer;
  transition:.25s;
  user-select:none;
}
.task.q1{background:#ff6b6b;}
.task.q2{background:#4dabff;}
.task.q3{background:#ffd666;color:#222;}
.task.q4{background:#6ee7b7;color:#222;}
.task small{display:block;font-size:11px;opacity:.75;margin-top:4px;}

.task.done{
  opacity:.35;
  text-decoration:line-through;
  filter:grayscale(1);
}

/* остальной CSS — БЕЗ ИЗМЕНЕНИЙ */
</style>
</head>

<body>

<header>Матрица Эйзенхауэра</header>

<div class="board">
  <div class="quadrant q1" data-id="q1"><h2>Важно · Срочно</h2><div class="tasks" ondrop="drop(event)" ondragover="allowDrop(event)"></div></div>
  <div class="quadrant q2" data-id="q2"><h2>Важно · Не срочно</h2><div class="tasks" ondrop="drop(event)" ondragover="allowDrop(event)"></div></div>
  <div class="quadrant q3" data-id="q3"><h2>Не важно · Срочно</h2><div class="tasks" ondrop="drop(event)" ondragover="allowDrop(event)"></div></div>
  <div class="quadrant q4" data-id="q4"><h2>Не важно · Не срочно</h2><div class="tasks" ondrop="drop(event)" ondragover="allowDrop(event)"></div></div>
</div>

<!-- весь HTML ниже — БЕЗ ИЗМЕНЕНИЙ -->

<script>
/* ===== TASKS SYSTEM ===== */
let currentQuadrantId = null;
let editingTaskId = null;
let tasks = JSON.parse(localStorage.getItem('eisenhowerTasks')) || {};

function saveTasks() {
  localStorage.setItem('eisenhowerTasks', JSON.stringify(tasks));
}

function renderTasks() {
  document.querySelectorAll('.tasks').forEach(el => el.innerHTML = '');
  for (const [quadId, taskList] of Object.entries(tasks)) {
    const container = document.querySelector(`.quadrant[data-id="${quadId}"] .tasks`);
    if (!container) continue;

    taskList.forEach((task, index) => {
      const el = document.createElement('div');
      el.className = `task ${quadId}` + (task.done ? ' done' : '');
      el.draggable = true;
      el.dataset.id = task.id;
      el.innerHTML = `
        ${task.title}
        ${task.comment ? `<small>${task.comment}</small>` : ''}
      `;

      el.onclick = () => {
        el.classList.toggle('done');
        task.done = el.classList.contains('done');
        saveTasks();
      };

      el.oncontextmenu = (e) => {
        e.preventDefault();
        if (confirm('Удалить задачу?')) {
          tasks[quadId].splice(index, 1);
          saveTasks();
          renderTasks();
        }
      };

      el.ondblclick = (e) => {
        e.stopPropagation();
        editTask(quadId, task.id);
      };

      el.ondragstart = (e) => {
        e.dataTransfer.setData('text/plain', JSON.stringify({ taskId: task.id, fromQuad: quadId }));
      };

      container.appendChild(el);
    });
  }
}

/* остальной JS — БЕЗ ИЗМЕНЕНИЙ */
</script>

</body>
</html>
