<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Eisenhower + Pomodoro</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">

<style>
:root{
--bg:#0f1220;
--glass:rgba(255,255,255,.08);
--border:rgba(255,255,255,.15);
--text:#fff;
--accent:#6c63ff;
--active:#ff6b6b;
}

*{box-sizing:border-box}

body{
margin:0;
font-family:Inter,sans-serif;
background:linear-gradient(135deg,#1a1f3c,#0f1220);
color:var(--text);
display:flex;
flex-direction:column;
height:100vh;
}

header{
text-align:center;
padding:14px;
font-size:22px;
font-weight:600;
}

.board{
flex:1;
display:grid;
grid-template-columns:1fr 1fr;
grid-template-rows:1fr 1fr;
gap:12px;
padding:12px;
}

.quadrant{
background:var(--glass);
border:1px solid var(--border);
border-radius:16px;
padding:12px;
overflow-y:auto;
}

h2{margin:0 0 8px;font-size:15px}

.note{
background:#fff9c4;
color:#222;
padding:10px;
border-radius:12px;
margin-bottom:8px;
cursor:pointer;
}

.note.active{
outline:2px solid var(--active);
}

.tags{display:flex;gap:4px;flex-wrap:wrap;margin-top:4px}
.tag{font-size:11px;background:#222;color:#fff;padding:2px 6px;border-radius:6px}

/* Modal */
.modal{
position:fixed;
inset:0;
background:rgba(0,0,0,.6);
display:none;
align-items:center;
justify-content:center;
}

.modal-content{
background:#1a1f3c;
padding:16px;
width:320px;
border-radius:14px;
border:1px solid var(--border);
}

textarea,input,select{
width:100%;
margin-top:6px;
padding:8px;
border-radius:8px;
border:none;
font-family:inherit;
}

.actions{display:flex;gap:8px;margin-top:10px}
button{flex:1;padding:8px;border:none;border-radius:8px;cursor:pointer}
.save{background:var(--accent);color:#fff}
.delete{background:#ff6b6b;color:#fff}

/* Pomodoro */
.pomodoro{
border-top:1px solid var(--border);
padding:10px;
display:grid;
grid-template-columns:1fr 1fr 1fr auto;
gap:8px;
align-items:center;
}

.timer{
grid-column:1/5;
text-align:center;
font-size:22px;
font-weight:600;
}

.pomo-btn{background:var(--accent);color:#fff}

/* Mobile */
@media(max-width:768px){
.board{grid-template-columns:1fr;grid-template-rows:auto}
.pomodoro{
grid-template-columns:1fr;
}
.timer{grid-column:auto}
}
</style>
</head>
<body>

<header>–ú–∞—Ç—Ä–∏—Ü–∞ –≠–π–∑–µ–Ω—Ö–∞—É—ç—Ä–∞</header>

<div class="board">
<div class="quadrant"><h2>–í–∞–∂–Ω–æ ¬∑ –°—Ä–æ—á–Ω–æ</h2></div>
<div class="quadrant"><h2>–í–∞–∂–Ω–æ ¬∑ –ù–µ —Å—Ä–æ—á–Ω–æ</h2></div>
<div class="quadrant"><h2>–ù–µ –≤–∞–∂–Ω–æ ¬∑ –°—Ä–æ—á–Ω–æ</h2></div>
<div class="quadrant"><h2>–ù–µ –≤–∞–∂–Ω–æ ¬∑ –ù–µ —Å—Ä–æ—á–Ω–æ</h2></div>
</div>

<!-- MODAL -->
<div class="modal" id="modal">
<div class="modal-content">
<textarea id="taskText" placeholder="–ó–∞–¥–∞—á–∞"></textarea>
<input id="taskTags" placeholder="–¢–µ–≥–∏">
<div class="actions">
<button class="save" onclick="saveTask()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
<button class="delete" onclick="deleteTask()">–£–¥–∞–ª–∏—Ç—å</button>
</div>
</div>
</div>

<!-- POMODORO -->
<div class="pomodoro">
<select id="pomoSelect"></select>
<input type="number" id="workTime" value="25">
<input type="number" id="restTime" value="5">
<button class="pomo-btn" onclick="startPomodoro()">‚ñ∂</button>
<div class="timer" id="timer">üçÖ 25:00</div>
</div>

<script>
let activeQuadrant=null, editingNote=null, activeTask=null;
let timerInterval, remaining=0, mode='work';

const beep=new Audio("data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAESsAACJWAAACABAAZGF0YQAAAAA=");

document.querySelectorAll('.quadrant').forEach(q=>{
q.onclick=e=>{
if(e.target.closest('.note')) return;
activeQuadrant=q;
openModal(null);
};
});

function openModal(note){
editingNote=note;
modal.style.display='flex';
taskText.value=note?.dataset.text||'';
taskTags.value=note?.dataset.tags||'';
}

function saveTask(){
let note=editingNote||document.createElement('div');
note.className='note';
note.dataset.text=taskText.value;
note.dataset.tags=taskTags.value;
note.innerHTML=`
<div>${taskText.value}</div>
<div class="tags">${renderTags(taskTags.value)}</div>
`;

note.onclick=e=>{
e.stopPropagation();
selectTask(note);
openModal(note);
};

if(!editingNote) activeQuadrant.appendChild(note);
updatePomodoroList();
closeModal();
}

function deleteTask(){
if(editingNote) editingNote.remove();
updatePomodoroList();
closeModal();
}

function renderTags(str){
return str.split(/[,#]/).filter(t=>t).map(t=>`<span class="tag">#${t.trim()}</span>`).join('');
}

function closeModal(){modal.style.display='none';editingNote=null}

function updatePomodoroList(){
pomoSelect.innerHTML='<option value="">–í—ã–±–µ—Ä–∏ –∑–∞–¥–∞—á—É</option>';
document.querySelectorAll('.note').forEach((n,i)=>{
pomoSelect.innerHTML+=`<option value="${i}">${n.dataset.text}</option>`;
});
}

function selectTask(note){
document.querySelectorAll('.note').forEach(n=>n.classList.remove('active'));
note.classList.add('active');
activeTask=note;
pomoSelect.value=[...document.querySelectorAll('.note')].indexOf(note);
}

function startPomodoro(){
clearInterval(timerInterval);
mode='work';
remaining=workTime.value*60;
tick();
timerInterval=setInterval(()=>{
remaining--;
tick();
if(remaining<=0){
beep.play();
mode=mode==='work'?'rest':'work';
remaining=(mode==='work'?workTime.value:restTime.value)*60;
}
},1000);
}

function tick(){
let m=String(Math.floor(remaining/60)).padStart(2,'0');
let s=String(remaining%60).padStart(2,'0');
timer.textContent=`${mode==='work'?'üçÖ':'üí§'} ${m}:${s}`;
}
</script>

</body>
</html>
